(function(f){var b=f("html"),e=f("body"),i=f(window);f(document).ready(function(){if(f(".wp-theater-section").length!==0){f(".wp-theater-section").each(function(){var n=this,m=f(this),j,l,o,k=f(".video-preview",this);if(f(".video-preview").length===0){return}if(m.hasClass("youtube")){j="youtube"}else{if(m.hasClass("vimeo")){j="vimeo"}}if(f(".wp-theater-iframe",this).length!==0){o=f(".wp-theater-bigscreen",this);l=f(".wp-theater-iframe",this)}else{if(m.is("[data-theater-id]")&&f("#"+m.attr("data-theater-id")).length!==0){o=f("#"+m.attr("data-theater-id"));l=f("#"+m.attr("data-theater-id")+" .wp-theater-iframe")}}k.children("a").click(function(p){p.preventDefault()});k.click(function(p){f(".video-preview.selected",n).removeClass("selected");f(this).addClass("selected");l.attr("src",f(this).attr("data-embed-url"));h=parseInt(f(this).attr("data-embed-height"));w=parseInt(f(this).attr("data-embed-width"));ratio=w/h;l.attr("width",w);l.attr("height",h);f("html, body").animate({scrollTop:(o.offset().top-25)+"px"},300)})})}if(f(".wp-theater-bigscreen").length!==0){f(".wp-theater-bigscreen").each(function(){var q=this,m=f(this),k=f(".wp-theater-bigscreen-inner",this),n=f(".wp-theater-bigscreen-options",this),j=f("a.fullwindow-toggle",this),p=f("a.lowerlights-toggle",this),l=f(".wp-theater-iframe",this),o=false;n.show();if(j.length!==0){j.click(function(r){if(!m.hasClass("fullwindow")){c();m.addClass("fullwindow");e.addClass("fullwindow");a(l,parseInt(k.width()),parseInt(k.height())-parseInt(p.height()),n)}else{m.removeClass("fullwindow");l.attr("style","");n.attr("style","");n.show();d()}r.preventDefault()});i.resize(function(){if(m.hasClass("fullwindow")){o=setTimeout(function(){a(l,parseInt(k.width()),parseInt(k.height())-parseInt(p.height()),n)},100)}else{clearTimeout(o)}})}if(p.length!==0){p.click(function(r){if(m.hasClass("lowerlights")){m.removeClass("lowerlights");f("#wp-theater-lowerlights").fadeOut(1000,function(){f("#wp-theater-lowerlights").remove()})}else{m.addClass("lowerlights");e.prepend('<div id="wp-theater-lowerlights">&nbsp;</div>');f("#wp-theater-lowerlights").hide().fadeIn(1000)}r.preventDefault()})}})}});function a(l,n,m,k){var n=parseInt(n),m=parseInt(m);var j=g(1.777777777,n-40,m-40);k.css("width",Math.round(j.width)+"px");l.css("width",Math.round(j.width)+"px");l.css("height",Math.round(j.height)+"px");k.css("margin-left",Math.round(j.x+20)+"px");l.css("margin-left",Math.round(j.x+20)+"px");l.css("margin-top",Math.round(j.y+30)+"px")}function g(m,l,k){var j={};if(m>=l/k){j.width=parseInt(l);j.height=parseInt(l/m);j.x=0;j.y=parseInt(k-j.height)/2}else{j.width=parseInt(k*m);j.height=parseInt(k);j.x=parseInt(l-j.width)/2;j.y=0}return j}function c(){var l=e.outerWidth(),n=e.outerHeight(),k=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop];b.data("scroll-position",k);b.data("previous-overflow",b.css("overflow"));b.css("overflow","hidden");window.scrollTo(k[0],k[1]);var m=e.outerWidth()-l;var j=e.outerHeight()-n;e.css({"margin-right":m,"margin-bottom":j})}function d(){b.css("overflow",b.data("previous-overflow"));var j=b.data("scroll-position");window.scrollTo(j[0],j[1]);e.css({"margin-right":0,"margin-bottom":0})}})(jQuery);